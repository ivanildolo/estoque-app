<h3>
  <a href="/" class="text-decoration-none"><mat-icon>home</mat-icon> Estoque /</a>
  <mat-icon>save</mat-icon>  cadastro de produto
</h3>
<div class="content">
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="outline">
      <mat-label>Nome</mat-label>
      <input matInput formControlName="name" required />
      <mat-error *ngIf="productForm.get('name')?.hasError('required')">O nome é obrigatório</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Descrição</mat-label>
      <input matInput formControlName="description" required />
      <mat-error *ngIf="productForm.get('description')?.hasError('required')">A descrição é obrigatória</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Preço</mat-label>
      <input matInput type="number" formControlName="price" required />
      <mat-error *ngIf="productForm.get('price')?.hasError('required')">O preço é obrigatório</mat-error>
      <mat-error *ngIf="productForm.get('price')?.hasError('min')">O preço minimo é 0 (zero)</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Quantidade</mat-label>
      <input matInput type="number" formControlName="quantity" required />
      <mat-error *ngIf="productForm.get('quantity')?.hasError('required')">Quantidade é obrigatório</mat-error>
      <mat-error *ngIf="productForm.get('quantity')?.hasError('min')">A quantidade minima permitida é 1</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Categoria</mat-label>
      <mat-select formControlName="category_id">
        @for (category of categories; track category) {
          <mat-option [value]="category.id">{{category.name}}</mat-option>
        }
      </mat-select>
      <mat-error *ngIf="productForm.get('category_id')?.hasError('required')">Categoria é obrigatória</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Localização no estoque</mat-label>
      <input matInput formControlName="location" required />
      <mat-error *ngIf="productForm.get('location')?.hasError('required')">Localização é obrigatória</mat-error>
    </mat-form-field>

    <div class="btn-save-container">
      <button mat-raised-button color="primary" type="submit" [disabled]="productForm.invalid || isLoading">
        <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
        <span *ngIf="!isLoading">Salvar</span>
      </button>
    </div>
  </form>
</div>
